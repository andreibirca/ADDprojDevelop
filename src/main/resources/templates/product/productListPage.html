<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <title>Customer contracts list</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/table-filter.css">
    <link rel="stylesheet" type="text/css" href="/css/header.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
<div th:replace="fragments/header :: header">

</div>

<a sec:authorize="hasAuthority('COMPANY')"
   th:href="@{/service/create}"
   class="btn btn-info" role="button">Create new service</a>

<div class="panel panel-primary filterable">
    <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
        <div class="pull-right">
            <button class="btn btn-default btn-xs btn-filter"><span class="glyphicon glyphicon-filter"></span> Filter
            </button>
        </div>
    </div>
    <table class="table">
        <thead>
        <tr class="filters">
            <th>
                <select class="form-control" id="selectFilter">
                    <option value=""></option>
                    <option th:each="category : ${categoryList}"
                            th:text="${category.getName()}">
                    </option>
                </select>
            </th>
            <th><input type="text" class="form-control" placeholder="Name" disabled></th>
            <th sec:authorize="hasAuthority('CUSTOMER')">
                <input type="text" class="form-control" placeholder="Company" disabled>
            </th>
            <th><input type="text" class="form-control" placeholder="Price" disabled></th>
            <th><input type="text" class="form-control" placeholder="Description" disabled></th>
            <th></th>
        </tr>

        </thead>
        <tbody>
        <tr th:each="product : ${products}">

            <td th:text="${product.getCategory().getName()}">category</td>
            <td th:text="${product.getName()}">name</td>
            <td sec:authorize="hasAuthority('CUSTOMER')" th:text="${product.getCompany().getName()}">company</td>
            <td class="currency money" th:text="${product.getPrice()}">price</td>
            <td th:text="${product.getDescription()}">description</td>

            <td><a th:href="@{/contract/createContract(
                            customerId=${customerId},
                            companyId=${product.getCompany().getId()},
                            productId=${product.getId()})}"
                   class="btn btn-info" role="button">Create new contract</a></td>

        </tr>
        </tbody>
    </table>
</div>

</body>

<script src="/js/table-filter.js"></script>

</html>